{{define "admin/sidebar"}}
<nav class="admin-nav">
    <div class="nav-brand">
        <a href="/admin">{{.SiteTitle}} Admin</a>
        {{if .AdminUsername}}<div class="nav-user">{{.AdminUsername}}{{if .OnlineCount}} <span class="online-badge">{{.OnlineCount}} online</span>{{end}}</div>{{end}}
    </div>
    <div class="nav-links">
        <a href="/admin" class="nav-link{{if eq .ActiveNav "dashboard"}} active{{end}}">Dashboard</a>

        <!-- Server Section -->
        <div class="nav-section" id="section-server">
            <div class="nav-section-header" onclick="toggleSection('server')">
                <span>Server</span>
                <span class="chevron">▼</span>
            </div>
            <div class="nav-section-links">
                <a href="/admin/server/settings" class="nav-link{{if eq .ActiveNav "server"}} active{{end}}">Settings</a>
                <a href="/admin/server/branding" class="nav-link{{if eq .ActiveNav "branding"}} active{{end}}">Branding</a>
                <a href="/admin/server/ssl" class="nav-link{{if eq .ActiveNav "ssl"}} active{{end}}">SSL/TLS</a>
                <a href="/admin/server/scheduler" class="nav-link{{if eq .ActiveNav "scheduler"}} active{{end}}">Scheduler</a>
                <a href="/admin/server/email" class="nav-link{{if eq .ActiveNav "email"}} active{{end}}">Email</a>
                <a href="/admin/server/logs" class="nav-link{{if eq .ActiveNav "logs"}} active{{end}}">Logs</a>
                <a href="/admin/server/database" class="nav-link{{if eq .ActiveNav "database"}} active{{end}}">Database</a>
                <a href="/admin/server/web" class="nav-link{{if eq .ActiveNav "web"}} active{{end}}">Web</a>
                <a href="/admin/server/pages" class="nav-link{{if eq .ActiveNav "pages"}} active{{end}}">Pages</a>
                <a href="/admin/server/notifications" class="nav-link{{if eq .ActiveNav "notifications"}} active{{end}}">Notifications</a>
                <a href="/admin/server/nodes" class="nav-link{{if eq .ActiveNav "nodes"}} active{{end}}">Nodes</a>
            </div>
        </div>

        <!-- Security Section -->
        <div class="nav-section" id="section-security">
            <div class="nav-section-header" onclick="toggleSection('security')">
                <span>Security</span>
                <span class="chevron">▼</span>
            </div>
            <div class="nav-section-links">
                <a href="/admin/security/auth" class="nav-link{{if eq .ActiveNav "security-auth"}} active{{end}}">Authentication</a>
                <a href="/admin/security/tokens" class="nav-link{{if eq .ActiveNav "security-tokens"}} active{{end}}">API Tokens</a>
                <a href="/admin/security/ratelimit" class="nav-link{{if eq .ActiveNav "security-ratelimit"}} active{{end}}">Rate Limiting</a>
                <a href="/admin/security/firewall" class="nav-link{{if eq .ActiveNav "security-firewall"}} active{{end}}">Firewall</a>
            </div>
        </div>

        <!-- Network Section -->
        <div class="nav-section" id="section-network">
            <div class="nav-section-header" onclick="toggleSection('network')">
                <span>Network</span>
                <span class="chevron">▼</span>
            </div>
            <div class="nav-section-links">
                <a href="/admin/network/tor" class="nav-link{{if eq .ActiveNav "tor"}} active{{end}}">Tor</a>
                <a href="/admin/network/geoip" class="nav-link{{if eq .ActiveNav "geoip"}} active{{end}}">GeoIP</a>
                <a href="/admin/network/blocklists" class="nav-link{{if eq .ActiveNav "blocklists"}} active{{end}}">Blocklists</a>
            </div>
        </div>

        <!-- System Section -->
        <div class="nav-section" id="section-system">
            <div class="nav-section-header" onclick="toggleSection('system')">
                <span>System</span>
                <span class="chevron">▼</span>
            </div>
            <div class="nav-section-links">
                <a href="/admin/system/backup" class="nav-link{{if eq .ActiveNav "backup"}} active{{end}}">Backup</a>
                <a href="/admin/system/maintenance" class="nav-link{{if eq .ActiveNav "maintenance"}} active{{end}}">Maintenance</a>
                <a href="/admin/system/updates" class="nav-link{{if eq .ActiveNav "updates"}} active{{end}}">Updates</a>
                <a href="/admin/system/info" class="nav-link{{if eq .ActiveNav "system"}} active{{end}}">System Info</a>
            </div>
        </div>

        <!-- Users Section per TEMPLATE.md PART 22 -->
        <div class="nav-section" id="section-users">
            <div class="nav-section-header" onclick="toggleSection('users')">
                <span>Users</span>
                <span class="chevron">▼</span>
            </div>
            <div class="nav-section-links">
                <a href="/admin/users/admins" class="nav-link{{if eq .ActiveNav "users-admins"}} active{{end}}">Administrators</a>
            </div>
        </div>

        <a href="/admin/engines" class="nav-link{{if eq .ActiveNav "engines"}} active{{end}}">Engines</a>
        <a href="/admin/help" class="nav-link{{if eq .ActiveNav "help"}} active{{end}}">Help</a>
    </div>
    <div class="nav-footer">
        <a href="/admin/profile" class="nav-link{{if eq .ActiveNav "profile"}} active{{end}}">Profile</a>
        <a href="/admin/logout" class="nav-link nav-logout">Logout</a>
    </div>
</nav>
{{end}}

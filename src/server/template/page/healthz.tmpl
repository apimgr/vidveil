{{define "healthz"}}
<!DOCTYPE html>
<html lang="en" class="theme-{{.Theme}}">
<head>
    {{template "public/head" .}}
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    {{template "public/header" .}}
    {{template "public/nav" .}}
    <main id="main-content" role="main" class="content-area">
        <!-- Project Info per AI.md PART 13 -->
        <header class="page-header">
            <h1>{{.ProjectName}}</h1>
            <p class="page-subtitle">{{.ProjectDescription}}</p>
        </header>

        <!-- Status Banner per AI.md PART 13 -->
        <div class="card status-card status-{{.StatusClass}}">
            <span class="status-icon">{{.StatusIcon}}</span>
            <span class="status-text">{{.StatusText}}</span>
        </div>

        <!-- Version & Build Info per AI.md PART 13 -->
        <section class="card">
            <h2>Version</h2>
            <div class="info-grid">
                <div class="info-row">
                    <span class="info-label">Version</span>
                    <span class="info-value"><code>{{.Version}}</code></span>
                </div>
                <div class="info-row">
                    <span class="info-label">Go Version</span>
                    <span class="info-value"><code>{{.GoVersion}}</code></span>
                </div>
                <div class="info-row">
                    <span class="info-label">Build</span>
                    <span class="info-value"><code>{{.BuildCommit}}</code> ({{.BuildDate}})</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Uptime</span>
                    <span class="info-value">{{.Uptime}}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Mode</span>
                    <span class="info-value"><span class="badge badge-{{.Mode}}">{{.ModeDisplay}}</span></span>
                </div>
            </div>
        </section>

        {{if .ClusterEnabled}}
        <!-- Cluster Info per AI.md PART 13 -->
        <section class="card">
            <h2>Cluster</h2>
            <div class="info-grid">
                <div class="info-row">
                    <span class="info-label">Status</span>
                    <span class="info-value status-{{.ClusterStatusClass}}">{{.ClusterStatusIcon}} {{.ClusterStatus}}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Primary</span>
                    <span class="info-value"><code>{{.ClusterPrimary}}</code></span>
                </div>
                <div class="info-row">
                    <span class="info-label">Role</span>
                    <span class="info-value">{{.ClusterRole}}</span>
                </div>
            </div>
            {{if .ClusterNodes}}
            <h3>Nodes</h3>
            <ul class="list-plain">
                {{range .ClusterNodes}}
                <li><code>{{.URL}}</code>{{if .IsPrimary}} <span class="badge badge-primary">Primary</span>{{end}}</li>
                {{end}}
            </ul>
            {{end}}
        </section>
        {{end}}

        <!-- Features per AI.md PART 13 (VidVeil: stateless per IDEA.md) -->
        <section class="card">
            <h2>üéõÔ∏è Features</h2>
            <ul class="feature-list">
                <li class="{{if .Features.TorEnabled}}feature-enabled{{else}}feature-disabled{{end}}">
                    üßÖ Tor: {{if .Features.TorEnabled}}<span class="status-ok">‚úÖ {{.Features.TorStatus}}</span> <code>{{.Features.TorOnionAddr}}</code>{{else}}<span class="status-disabled">Disabled</span>{{end}}
                </li>
                <li class="{{if .Features.GeoIP}}feature-enabled{{else}}feature-disabled{{end}}">
                    üåç GeoIP{{if .Features.GeoIP}}: <span class="status-ok">‚úÖ Enabled</span>{{else}}: <span class="status-disabled">Disabled</span>{{end}}
                </li>
                <li class="{{if .Features.Metrics}}feature-enabled{{else}}feature-disabled{{end}}">
                    üìä Metrics{{if .Features.Metrics}}: <span class="status-ok">‚úÖ Enabled</span>{{else}}: <span class="status-disabled">Disabled</span>{{end}}
                </li>
            </ul>
        </section>

        <!-- Component Checks per AI.md PART 13 -->
        <section class="card">
            <h2>Component Status</h2>
            <div class="checks-grid">
                <div class="check-item">
                    <span class="check-name">Database</span>
                    <span class="check-status status-{{if eq .Checks.Database "ok"}}ok{{else}}error{{end}}">{{if eq .Checks.Database "ok"}}OK{{else}}Error{{end}}</span>
                </div>
                <div class="check-item">
                    <span class="check-name">Cache</span>
                    <span class="check-status status-{{if eq .Checks.Cache "ok"}}ok{{else}}error{{end}}">{{if eq .Checks.Cache "ok"}}OK{{else}}Error{{end}}</span>
                </div>
                <div class="check-item">
                    <span class="check-name">Disk</span>
                    <span class="check-status status-{{if eq .Checks.Disk "ok"}}ok{{else}}error{{end}}">{{if eq .Checks.Disk "ok"}}OK{{else}}Error{{end}}</span>
                </div>
                <div class="check-item">
                    <span class="check-name">Scheduler</span>
                    <span class="check-status status-{{if eq .Checks.Scheduler "ok"}}ok{{else}}error{{end}}">{{if eq .Checks.Scheduler "ok"}}OK{{else}}Error{{end}}</span>
                </div>
                {{if .ClusterEnabled}}
                <div class="check-item">
                    <span class="check-name">Cluster</span>
                    <span class="check-status status-{{if eq .Checks.Cluster "ok"}}ok{{else}}error{{end}}">{{if eq .Checks.Cluster "ok"}}OK{{else}}Error{{end}}</span>
                </div>
                {{end}}
            </div>
        </section>

        <!-- Statistics (VidVeil-specific per IDEA.md) -->
        <section class="card">
            <h2>üìà Statistics</h2>
            <dl class="info-grid stats-grid">
                <dt>üîç Total Searches</dt><dd>{{.Stats.Searches}}</dd>
                <dt>üîå Engines Enabled</dt><dd>{{.Stats.EnginesEnabled}} / {{.Stats.EnginesTotal}}</dd>
            </dl>
        </section>

        <!-- Last Updated per AI.md PART 13 -->
        <div class="health-meta">
            <p>Last checked: <time datetime="{{.Timestamp}}">{{.TimestampDisplay}}</time></p>
            <p class="auto-refresh">Auto-refreshing in <span id="countdown">30</span>s</p>
        </div>
    </main>
    {{template "public/footer" .}}
    {{template "public/scripts" .}}
    <script>
        // Auto-refresh countdown per AI.md PART 13
        (function() {
            let seconds = 30;
            const countdown = document.getElementById('countdown');
            setInterval(function() {
                seconds--;
                if (countdown) countdown.textContent = seconds;
                if (seconds <= 0) {
                    location.reload();
                }
            }, 1000);
        })();
    </script>
</body>
</html>
{{end}}

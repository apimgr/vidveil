{{define "search"}}
<!DOCTYPE html>
<html lang="en" class="theme-{{.Theme}}">
<head>
    {{template "public/head" .}}
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    {{template "public/header" .}}
    <main class="results" id="main-content" role="main" aria-label="Search results">
        {{/* Search header with inline search and collapsible filters */}}
        <div class="search-header" id="search-header">
            <form action="/search" method="get" class="search-form search-form--inline" role="search" aria-label="Refine search" onsubmit="return handleSearchSubmit(this)">
                <div class="search-wrapper search-wrapper--compact">
                    <input type="text"
                           name="q"
                           value="{{.Query}}"
                           placeholder="Refine search..."
                           autocomplete="off"
                           class="search-input--compact"
                           aria-label="Search query">
                    <button type="submit" class="search-btn--compact" aria-label="Search">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                    </button>
                </div>
            </form>
            {{template "public/filters" (dict "ShowEngines" false "Compact" true)}}
        </div>

        <div class="initial-loading" id="initial-loading" role="status" aria-live="polite">
            <div class="spinner large" aria-hidden="true"></div>
            <p id="loading-text">Connecting to engines...</p>
        </div>
        <p class="meta hidden" id="search-meta" data-query="{{.Query}}" aria-live="polite"><span id="result-count">0</span> results <span id="search-time-container">(streaming...)</span></p>
        <div class="related-searches hidden" id="related-searches" role="navigation" aria-label="Related searches">
            <span class="related-label">Related searches</span>
            <div class="related-tags" id="related-tags"></div>
        </div>
        <div class="video-grid" id="video-grid" role="list" aria-label="Video results"></div>
        <div class="loading hidden" id="loading" role="status" aria-live="polite"><div class="spinner" aria-hidden="true"></div><span>Loading more...</span></div>
    </main>
    {{template "public/footer" .}}
    <div class="status-bar" id="status-bar">
        <span id="status-text">Connecting...</span>
        <span id="engine-status"></span>
    </div>
    {{template "public/scripts" .}}
</body>
</html>
{{end}}
